version: "1.0"
description: "Cycle v2 Stack File"
containers:
  db:
    name: "Database"
    image:
      name: "MongoDB"
      source: 
        docker_hub:
          target: "mongo:3.6"
      preload: false
    volumes:
      - local: 
          max_size: "2G"
        destination: "/data/db"
        read_only: false
        remote_access:
          enable: true,
          default_password: 125D6D03B32C84D492747F79CF0BF6E179D287F341384EB5D6D3197525AD6BE8E6DF0116032935698F99A09E265073D1D6C32C274591BF1D0A20AD67CBA921BC
    config:
      runtime:
        command:
          path: "/entrypoint.sh"
          args: "mongod --auth"
        privileged: false
        capabilities: []
        namespaces: ["network", "ipc", "uts", "mount", "pid"]
      network:
        public: "enable"
        hostname: "db"
        ports: ["27017"]
        dns:
          nameservers: ["8.8.4.4", "8.8.8.8"]
      deployment:
        instances: 1
        tags:
          require: ["db"]
          pool: ["sjc", "nyc"]
      resources:
        cpu:
          limit: "0.5cores"
          reserve: "0.1cores"
        ram:
          limit: "2G"
          reserve: "250M"
      options:
        events:
          start:
            webhooks: []
          stop:
            webhooks: []
          deploy:
            webhooks: []
        monitor:
          auto_restart: true
          max_restarts: 3
          restart_delay_secs: 10
          notify:
            emails: ["alex@alexmattoni.com"]